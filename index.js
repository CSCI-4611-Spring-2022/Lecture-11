var w=Object.defineProperty;var f=(h,e,s)=>e in h?w(h,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[e]=s;var r=(h,e,s)=>(f(h,typeof e!="symbol"?e+"":e,s),s);import{W as M,S as O,P as y,C as L,V as X,M as Y,D,L as x,A as I,a as d,b as P,c as C,G as H,d as g,F as u,e as A,T as R,f as l,g as b}from"./vendor.js";const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}};k();class z{constructor(e=1.333){r(this,"aspectRatio");r(this,"fov");r(this,"znear");r(this,"zfar");r(this,"renderer");r(this,"scene");r(this,"camera");r(this,"clock");this.aspectRatio=e,this.fov=60,this.znear=1,this.zfar=1e3,this.renderer=new M,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",()=>{this.resize()},!1),window.addEventListener("mousedown",s=>{this.onMouseDown(s)}),window.addEventListener("mouseup",s=>{this.onMouseUp(s)}),window.addEventListener("mousemove",s=>{this.onMouseMove(s)}),window.addEventListener("keydown",s=>{this.onKeyDown(s)}),window.addEventListener("keyup",s=>{this.onKeyUp(s)}),this.scene=new O,this.camera=new y(this.fov,this.aspectRatio,this.znear,this.zfar),this.clock=new L}start(){this.createScene(),this.mainLoop()}mainLoop(){this.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(()=>this.mainLoop())}resize(){this.renderer.setSize(window.innerWidth,window.innerHeight);var e=new X;this.renderer.getViewport(e);var s=window.innerWidth/window.innerHeight;this.aspectRatio>s?this.renderer.setViewport(0,(window.innerHeight-window.innerWidth/this.aspectRatio)/2,window.innerWidth,window.innerWidth/this.aspectRatio):this.renderer.setViewport((window.innerWidth-window.innerHeight*this.aspectRatio)/2,0,window.innerHeight*this.aspectRatio,window.innerHeight)}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onKeyDown(e){}onKeyUp(e){}}class B extends z{constructor(){super(1920/1080);r(this,"debugMode");r(this,"mouseDrag");r(this,"cameraOrbitX");r(this,"cameraOrbitY");r(this,"cameraDistance");r(this,"lightOrbitX");r(this,"lightOrbitY");r(this,"lightIntensity");r(this,"debugMaterial");r(this,"light");r(this,"lightHelper");this.debugMode=!1,this.mouseDrag=!1,this.cameraOrbitX=0,this.cameraOrbitY=0,this.cameraDistance=0,this.lightOrbitX=0,this.lightOrbitY=0,this.lightIntensity=0,this.debugMaterial=new Y,this.light=new D,this.lightHelper=new x}createScene(){this.cameraDistance=4,this.camera.position.set(0,0,this.cameraDistance),this.camera.lookAt(0,0,0),this.camera.up.set(0,1,0);var e=new I("white",.5);this.scene.add(e),this.light.color=new d("white"),this.lightIntensity=1,this.lightOrbitX=-22.5,this.lightOrbitY=45,this.scene.add(this.light);var s=[];s.push(new b(0,0,0)),s.push(new b(0,0,10)),this.lightHelper.geometry.setFromPoints(s),this.scene.add(this.lightHelper);var i=new P;i.color=new d("gray"),this.lightHelper.material=i,this.updateLightParameters(),this.debugMaterial.wireframe=!0;var t=new C(2);this.scene.add(t);var a=new H,n=a.addFolder("Controls");n.open();var p=n.add(this,"lightOrbitX",-180,180);p.name("Light Orbit X"),p.onChange(c=>{this.updateLightParameters()});var o=n.add(this,"lightOrbitY",-90,90);o.name("Light Orbit Y"),o.onChange(c=>{this.updateLightParameters()});var o=n.add(this,"lightIntensity",0,2);o.name("Light Intensity"),o.onChange(c=>{this.updateLightParameters()});var m=n.add(this,"debugMode");m.name("Debug Mode"),m.onChange(c=>{this.toggleDebugMode(c)});var v=this.createSteve();this.scene.add(v)}createSteve(){var e=new g,s=this.createBoxVertices(1,1,1),i=this.createBoxNormals(),t=this.createBoxTextureCoords(),a=this.createBoxIndices();e.geometry.setAttribute("position",new u(s,3)),e.geometry.setAttribute("normal",new u(i,3)),e.geometry.setAttribute("uv",new u(t,2)),e.geometry.setIndex(a);var n=new A;return n.map=new R().load("./assets/steve.png"),e.material=n,e}createBoxVertices(e,s,i){var t=[];return t.push(-e/2,-s/2,i/2),t.push(e/2,-s/2,i/2),t.push(e/2,s/2,i/2),t.push(-e/2,s/2,i/2),t.push(-e/2,-s/2,-i/2),t.push(e/2,-s/2,-i/2),t.push(e/2,s/2,-i/2),t.push(-e/2,s/2,-i/2),t.push(-e/2,-s/2,-i/2),t.push(-e/2,-s/2,i/2),t.push(-e/2,s/2,i/2),t.push(-e/2,s/2,-i/2),t.push(e/2,-s/2,-i/2),t.push(e/2,-s/2,i/2),t.push(e/2,s/2,i/2),t.push(e/2,s/2,-i/2),t.push(-e/2,s/2,i/2),t.push(e/2,s/2,i/2),t.push(e/2,s/2,-i/2),t.push(-e/2,s/2,-i/2),t.push(-e/2,-s/2,i/2),t.push(e/2,-s/2,i/2),t.push(e/2,-s/2,-i/2),t.push(-e/2,-s/2,-i/2),t}createBoxNormals(){var e=[];return e.push(0,0,1),e.push(0,0,1),e.push(0,0,1),e.push(0,0,1),e.push(0,0,-1),e.push(0,0,-1),e.push(0,0,-1),e.push(0,0,-1),e.push(-1,0,0),e.push(-1,0,0),e.push(-1,0,0),e.push(-1,0,0),e.push(1,0,0),e.push(1,0,0),e.push(1,0,0),e.push(1,0,0),e.push(0,1,0),e.push(0,1,0),e.push(0,1,0),e.push(0,1,0),e.push(0,-1,0),e.push(0,-1,0),e.push(0,-1,0),e.push(0,-1,0),e}createBoxIndices(){var e=[];return e.push(0,1,2),e.push(2,3,0),e.push(4,6,5),e.push(6,4,7),e.push(8,9,10),e.push(10,11,8),e.push(12,14,13),e.push(14,12,15),e.push(16,17,18),e.push(18,19,16),e.push(20,22,21),e.push(22,20,23),e}createBoxTextureCoords(){var e=[];return e.push(this.rescale(64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64+128,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64+128,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64+128,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64+128,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64-64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64-64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64-64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64-64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64+64,0,512,0,1),this.rescale(64+64,0,512,1,0)),e.push(this.rescale(64+64+64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64,0,512,1,0)),e.push(this.rescale(64,0,512,0,1),this.rescale(64+64-64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64+64-64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64-64,0,512,1,0)),e.push(this.rescale(64,0,512,0,1),this.rescale(64-64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64+64-64,0,512,1,0)),e.push(this.rescale(64+64+64,0,512,0,1),this.rescale(64+64-64,0,512,1,0)),e.push(this.rescale(64+64+64,0,512,0,1),this.rescale(64-64,0,512,1,0)),e.push(this.rescale(64+64,0,512,0,1),this.rescale(64-64,0,512,1,0)),e}rescale(e,s,i,t,a){return t+(a-t)*(e-s)/(i-s)}update(e){}onMouseDown(e){e.target.localName=="canvas"&&(this.mouseDrag=!0)}onMouseUp(e){this.mouseDrag=!1}onMouseMove(e){this.mouseDrag&&(this.cameraOrbitX+=e.movementY,this.cameraOrbitX<90||this.cameraOrbitX>270?this.cameraOrbitY+=e.movementX:this.cameraOrbitY-=e.movementX,this.cameraOrbitX>=360?this.cameraOrbitX-=360:this.cameraOrbitX<0&&(this.cameraOrbitX+=360),this.cameraOrbitY>=360?this.cameraOrbitY-=360:this.cameraOrbitY<0&&(this.cameraOrbitY+=360),this.updateCameraOrbit())}updateCameraOrbit(){var e=new l().makeRotationY(-this.cameraOrbitY*Math.PI/180);e.multiply(new l().makeRotationX(-this.cameraOrbitX*Math.PI/180)),this.camera.position.set(0,0,this.cameraDistance),this.camera.applyMatrix4(e),this.cameraOrbitX<90||this.cameraOrbitX>270?this.camera.up.set(0,1,0):this.cameraOrbitX>90&&this.cameraOrbitX<270?this.camera.up.set(0,-1,0):this.cameraOrbitX==270?this.camera.up.set(Math.sin(-this.cameraOrbitY*Math.PI/180),0,Math.cos(-this.cameraOrbitY*Math.PI/180)):this.camera.up.set(-Math.sin(-this.cameraOrbitY*Math.PI/180),0,-Math.cos(-this.cameraOrbitY*Math.PI/180)),this.camera.lookAt(0,0,0)}updateLightParameters(){var e=new l().makeRotationY(this.lightOrbitX*Math.PI/180);e.multiply(new l().makeRotationX(-this.lightOrbitY*Math.PI/180)),this.light.position.set(0,0,10),this.light.applyMatrix4(e),this.lightHelper.lookAt(this.light.position),this.light.intensity=this.lightIntensity}toggleDebugMode(e){this.scene.traverse(s=>{s instanceof g&&(e?(s.userData={originalMaterial:s.material},s.material=this.debugMaterial):s.material=s.userData.originalMaterial)})}}var V=new B;V.start();
